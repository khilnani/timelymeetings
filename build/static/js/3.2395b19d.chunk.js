(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[3],{31:function(t,n,e){"use strict";e.r(n),e.d(n,"LocalNotificationsWeb",(function(){return h}));var i=e(17);function r(t,n){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=Object(i.a)(t))||n&&t&&"number"===typeof t.length){e&&(t=e);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==e.return||e.return()}finally{if(u)throw o}}}}var a=e(0),o=e.n(a),s=e(2),u=e(8),c=e(11),f=e(12),p=e(13),h=function(t){Object(f.a)(e,t);var n=Object(p.a)(e);function e(){var t;return Object(u.a)(this,e),(t=n.apply(this,arguments)).pending=[],t.hasNotificationSupport=function(){if(!("Notification"in window)||!Notification.requestPermission)return!1;if("granted"!==Notification.permission)try{new Notification("")}catch(t){if("TypeError"==t.name)return!1}return!0},t}return Object(c.a)(e,[{key:"createChannel",value:function(){var t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw this.unimplemented("Not implemented on web.");case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deleteChannel",value:function(){var t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw this.unimplemented("Not implemented on web.");case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"listChannels",value:function(){var t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw this.unimplemented("Not implemented on web.");case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"schedule",value:function(){var t=Object(s.a)(o.a.mark((function t(n){var e,i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasNotificationSupport()){t.next=2;break}throw this.unavailable("Notifications not supported in this browser.");case 2:e=r(n.notifications);try{for(e.s();!(i=e.n()).done;)a=i.value,this.sendNotification(a)}catch(o){e.e(o)}finally{e.f()}return t.abrupt("return",{notifications:n.notifications.map((function(t){return{id:t.id}}))});case 5:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"getPending",value:function(){var t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{notifications:this.pending});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"registerActionTypes",value:function(){var t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw this.unimplemented("Not implemented on web.");case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"cancel",value:function(){var t=Object(s.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.pending=this.pending.filter((function(t){return!n.notifications.find((function(n){return n.id===t.id}))}));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"areEnabled",value:function(){var t=Object(s.a)(o.a.mark((function t(){var n,e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.checkPermissions();case 2:return n=t.sent,e=n.display,t.abrupt("return",{value:"granted"===e});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"requestPermissions",value:function(){var t=Object(s.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasNotificationSupport()){t.next=2;break}throw this.unavailable("Notifications not supported in this browser.");case 2:return t.t0=this,t.next=5,Notification.requestPermission();case 5:return t.t1=t.sent,n=t.t0.transformNotificationPermission.call(t.t0,t.t1),t.abrupt("return",{display:n});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkPermissions",value:function(){var t=Object(s.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasNotificationSupport()){t.next=2;break}throw this.unavailable("Notifications not supported in this browser.");case 2:return n=this.transformNotificationPermission(Notification.permission),t.abrupt("return",{display:n});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"transformNotificationPermission",value:function(t){switch(t){case"granted":return"granted";case"denied":return"denied";default:return"prompt"}}},{key:"sendPending",value:function(){var t,n,e=[],i=(new Date).getTime(),a=r(this.pending);try{for(a.s();!(n=a.n()).done;){var o=n.value;(null===(t=o.schedule)||void 0===t?void 0:t.at)&&o.schedule.at.getTime()<=i&&(this.buildNotification(o),e.push(o))}}catch(s){a.e(s)}finally{a.f()}this.pending=this.pending.filter((function(t){return!e.find((function(n){return n===t}))}))}},{key:"sendNotification",value:function(t){var n,e=this;if(null===(n=t.schedule)||void 0===n?void 0:n.at){var i=t.schedule.at.getTime()-(new Date).getTime();return this.pending.push(t),void setTimeout((function(){e.sendPending()}),i)}this.buildNotification(t)}},{key:"buildNotification",value:function(t){var n=new Notification(t.title,{body:t.body});return n.addEventListener("click",this.onClick.bind(this,t),!1),n.addEventListener("show",this.onShow.bind(this,t),!1),n}},{key:"onClick",value:function(t){var n={actionId:"tap",notification:t};this.notifyListeners("localNotificationActionPerformed",n)}},{key:"onShow",value:function(t){this.notifyListeners("localNotificationReceived",t)}}]),e}(e(3).b)}}]);
//# sourceMappingURL=3.2395b19d.chunk.js.map