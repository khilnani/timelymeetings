(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{1350:function(e,t,n){"use strict";n.r(t);var o=n(6),a=n.n(o),r=n(27),i=n.n(r),s=(n(36),n(3)),c=n.n(s),l=n(5),u=n(11),p=n(15),d=n(7),g=n(16),f=n(17),h=n(20),m=n(19);n(26);function b(e,t){return new Date(e.getTime()+6e4*t)}function x(){console.log("getUserOptions");var e=void 0,t=(e=document.getElementById("meetingDuration")).options[e.selectedIndex].value;e=document.getElementById("meetingSlot");var n=-1;console.log("select.selectedIndex",e.selectedIndex),e.selectedIndex>-1&&(n=e.options[e.selectedIndex].value);var o={meetingDuration:t,meetingSlot:n,meetingSpeedy:document.getElementById("meetingSpeedy").checked};return console.log("getUserOptions.o",o),o}function v(){console.log("savePausedStateToLocalStorage");var e=localStorage.getItem("paused");return console.log("savePausedStateToLocalStorage - paused",e,typeof e),e}function y(){console.log("saveDurationToLocalStorage");var e=x();localStorage.setItem("meetingDuration",e.meetingDuration)}function j(){console.log("saveSpeedyToLocalStorage");var e=x();localStorage.setItem("meetingSpeedy",e.meetingSpeedy)}function k(){console.log("saveToLocalStorage"),y(),function(){console.log("saveSlotToLocalStorage");var e=x();localStorage.setItem("meetingSlot",e.meetingSlot)}(),j()}function w(e){console.log("updateFromLocalStorage");var t=localStorage.getItem("meetingDuration");console.log("lc.meetingDuration",t,typeof t);var n=localStorage.getItem("meetingSlot");console.log("lc.meetingSlot",n,typeof n);var o=localStorage.getItem("meetingSpeedy");console.log("lc.meetingSpeedy",o,typeof o),t&&(document.getElementById("meetingDuration").value=t,e()),function(e,t){console.log("selectHasValue");var n=document.getElementById(e);return null!==n&&n.innerHTML.indexOf('value="'+t+'"')>-1}("meetingSlot",n)&&(document.getElementById("meetingSlot").value=n),o&&(console.log("meetingSpeedy.checked","true"===o),document.getElementById("meetingSpeedy").checked="true"===o)}var S=n(8),O=n(10),N=!0;function C(){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checkNativeNotificationsAvailability"),t="web"!==S.a.getPlatform(),console.log("isNative?",t),e.next=5,S.a.isPluginAvailable("LocalNotifications");case 5:return n=e.sent,console.log("isCapacitorPluginAvailable?",n),!1,o=t&&n,console.log("checkNativeNotificationsAvailability?",o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("requestNativeNotificationsPermissions"),t=!1,e.prev=2,e.next=5,O.a.checkPermissions();case 5:if("granted"!==e.sent.display){e.next=10;break}t=!0,e.next=14;break;case 10:return e.next=12,O.a.requestPermissions();case 12:"granted"===e.sent.display&&(t=!0);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:return console.log("requestNativeNotificationsPermissions - avail",t),e.abrupt("return",t);case 21:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function B(e,t){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(c.a.mark((function e(t,n){var o,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sendNativeNotification",t,n),e.next=3,C();case 3:if(o=e.sent,console.log("isNativeNotificationsAvailable?",o),e.t0=o,!e.t0){e.next=10;break}return e.next=9,D();case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=23;break}return e.prev=11,e.next=14,O.a.schedule({notifications:[{title:"Timely Meetings",body:t,id:(new Date).getTime(),schedule:{at:n},sound:"./public/assets/double-beep.aiff",vibrate:!0,attachments:null,actionTypeId:"",extra:null}]});case 14:return a=e.sent,console.log("Success",a),e.abrupt("return",!0);case 19:return e.prev=19,e.t1=e.catch(11),console.error(e.t1),e.abrupt("return",!1);case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}function P(){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clearNativeNotifications"),e.next=3,G();case 3:if(t=e.sent,!((n=t.notifications)&&n.length>0)){e.next=9;break}return e.next=8,O.a.cancel(t);case 8:console.log("Cleared Native Notifications",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checkBrowserNotificationsAvailability"),t="Notification"in window,console.log("Browser Notification supported?",t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checkBrowserNotificationsSchedulingAvailability"),e.next=3,E();case 3:return t=e.sent,!1,n=t&&"showTrigger"in Notification.prototype,console.log("Browser Notification Triggers supported?",n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return H.apply(this,arguments)}function H(){return(H=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("requestBrowserNotificationsPermissions"),!E()){e.next=8;break}if("granted"===Notification.permission){e.next=8;break}return console.log("Browser Notification permissions being asked."),e.next=6,Notification.requestPermission();case 6:t=e.sent,console.log("Browser Notification permission",t);case 8:return n="granted"===Notification.permission,console.log("requestBrowserNotificationsPermissions?",n),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return z.apply(this,arguments)}function z(){return(z=Object(l.a)(c.a.mark((function e(t,n){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("sendBrowserNotification",t,n),e.t0=E(),!e.t0){e.next=6;break}return e.next=5,q();case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=13;break}console.log("Browser Notification permissions already granted, attempting to send."),o=new Notification(t,{requireInteraction:!0,vibrate:[200,100,200]}),console.log("Browser Notification sent",o),e.next=15;break;case 13:console.log("Browser Notification permissions denied."),alert(t);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return V.apply(this,arguments)}function V(){return(V=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("pauseNotifications - current",N),N=!1,X();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return Y.apply(this,arguments)}function Y(){return(Y=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("enableNotifications - current",N),N=!0;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return _.apply(this,arguments)}function _(){return(_=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checkNotificationsAvailability"),e.next=3,C();case 3:return t=e.sent,e.next=6,E();case 6:return n=e.sent,e.next=9,A();case 9:if(!t){e.next=14;break}return e.next=12,D();case 12:e.next=17;break;case 14:if(!n){e.next=17;break}return e.next=17,q();case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return Q.apply(this,arguments)}function Q(){return(Q=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getPendingNotifications"),t={notifications:[]},e.next=4,C();case 4:if(!e.sent){e.next=10;break}return e.next=7,O.a.getPending();case 7:t=e.sent,n=t.notifications,console.log("Pending Native Notifications",n);case 10:return e.next=12,A();case 12:if(!e.sent){e.next=14;break}console.log("getPendingNotifications - Not implemented for Browser");case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clearScheduledNotifications"),e.next=3,C();case 3:if(!e.sent){e.next=6;break}return e.next=6,P();case 6:return e.next=8,A();case 8:if(!e.sent){e.next=10;break}console.log("clearScheduledNotifications - Not implemented for Browser");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(l.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("sendNotification",t,"NOW","enabled",N),!N){e.next=8;break}return n=new Date(Date.now()+1e3),e.next=5,B(t,n);case 5:o=e.sent,console.log("Native Notifications Sent?",o),o||(console.log("Attempting Browser Notification."),U(t,n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(l.a)(c.a.mark((function e(t,n){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("scheduleNotification",t,n,"enabled",N),o=!1,!N){e.next=14;break}return e.next=5,C();case 5:if(!e.sent){e.next=9;break}return e.next=8,B(t,n);case 8:o=e.sent;case 9:return e.next=11,A();case 11:if(!e.sent){e.next=13;break}console.log("scheduleNotification - Not implemented for Browser");case 13:console.log("scheduleNotification?",o);case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=n(4),ae=void 0,re=!1,ie=!1,se="Your meeting will end in 5 minutes",ce="Your meeting has ended";h.a.addListener("appStateChange",(function(e){var t=e.isActive;console.log("App state changed. Is active?",t)})),h.a.addListener("appUrlOpen",(function(e){console.log("App opened with URL:",e)})),h.a.addListener("appRestoredResult",(function(e){console.log("Restored state:",e)}));var le=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={paused:!1},e.onDurationChange=e.onDurationChange.bind(Object(d.a)(e)),e.onSpeedyChange=e.onSpeedyChange.bind(Object(d.a)(e)),e.onSlotChange=e.onSlotChange.bind(Object(d.a)(e)),e.onRefreshClick=e.onRefreshClick.bind(Object(d.a)(e)),e.togglePause=e.togglePause.bind(Object(d.a)(e)),e}return Object(p.a)(n,[{key:"initializeClock",value:function(){var e=Object(l.a)(c.a.mark((function e(t,n){var o,a,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r(n),console.log("updateClock"),!(t.total>3e5)){e.next=6;break}document.body.style.backgroundColor="#00ECB9",e.next=11;break;case 6:if(document.body.style.backgroundColor="#FBF719",re){e.next=11;break}return re=!0,e.next=11,$(se);case 11:if(!(t.total>0)){e.next=15;break}a(t.hours,t.minutes,t.seconds),e.next=22;break;case 15:if(clearInterval(ae),a(0,0,0),document.body.style.backgroundColor="#FFFFFF",ie){e.next=22;break}return ie=!0,e.next=22,$(ce);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(){return s.apply(this,arguments)},r=function(e){var t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),a=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:a,minutes:o,seconds:n}},a=function(e,n,o){var a=document.getElementById(t),r=a.querySelector(".hours"),i=a.querySelector(".minutes"),s=a.querySelector(".seconds"),c=("0"+e).slice(-2),l=("0"+n).slice(-2),u=("0"+o).slice(-2);r.innerHTML=c,i.innerHTML=l,s.innerHTML=u,document&&document.title&&(document.title=c+":"+l+":"+u+" - Timely Meetings | Meeting Countdown Timer")},console.log("initializeClock"),clearInterval(ae),re=!1,ie=!1,e.next=10,X();case 10:if(!((o=new Date(Date.parse(n)-3e5))>Date.now())){e.next=18;break}return e.next=14,te(se,o);case 14:if(!e.sent){e.next=16;break}re=!0;case 16:e.next=20;break;case 18:console.log("End time is sooner than the warning time, skipping warning notification."),re=!0;case 20:if(!(n>Date.now())){e.next=27;break}return e.next=23,te(ce,n);case 23:if(!e.sent){e.next=25;break}ie=!0;case 25:e.next=29;break;case 27:console.log("End time has past, skipping end notification."),ie=!0;case 29:return console.log("notificationWarningSentOrScheduled",re),console.log("notificationFinalSentOrScheduled",ie),e.next=33,G();case 33:return e.next=35,i();case 35:ae=setInterval(i,1e3);case 36:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateMeetingTime",value:function(e,t){console.log("updateMeetingTime");var n={hour:"numeric",minute:"2-digit"},o=e.toLocaleTimeString("en-us",n),a=t.toLocaleTimeString("en-us",n);document.getElementById("meetingTime").textContent=o+" to "+a}},{key:"updateStartTimeOptions",value:function(){console.log("updateStartTimeOptions");var e=function(){var e;return console.log("getMeetingDuration"),(e=document.getElementById("meetingDuration")).options[e.selectedIndex].value}(),t=function(e,t){console.log("getTimeslots");var n=new Date(Date.now());n.setHours(0,0,0,0);var o=new Date(Date.now());o.setHours(23,59,59,99);for(var a=[];n<o;){var r=b(n,15),i=e>=n&&e<r;if(a.push({label:n.toLocaleTimeString(),value:n.toString(),selected:i}),i){for(var s=0;s<4;s++)a.push({label:r.toLocaleTimeString(),value:r.toString(),selected:!1}),r=b(r,15);break}n=r}var c=Math.ceil(t/15)+4;return console.log("slotCount",c),a=a.slice(a.length-c),console.log("slots",a),a}(function(){console.log("getNow");var e=new Date(Date.now()),t=e.toLocaleTimeString(),n={hours:e.getHours(),mins:e.getMinutes(),label:t,date:e};return console.log(n),n}().date,e),n=document.getElementById("meetingSlot");n.options.length=0;var o=void 0;for(var a in t)n.options[n.options.length]=new Option(t[a].label,t[a].value),t[a].selected&&(o=t[a].value);n.value=o}},{key:"updateCountdown",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n,o,a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updateCountdown"),k(),t=x(),n=t.meetingDuration,o=t.meetingSlot,a=t.meetingSpeedy,r=new Date(Date.parse(o)),console.log("meetingStartTime",r),!0!==a&&"true"!==a||(n-=5),i=new Date(Date.parse(r)+60*n*1e3),console.log("meetingEndTime",i),this.updateMeetingTime(r,i),e.next=14,this.initializeClock("clockdiv",i);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onDurationChange",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onDurationChange"),y(),this.updateStartTimeOptions(),w(this.updateStartTimeOptions),e.next=6,this.updateCountdown();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSpeedyChange",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onSpeedyChange"),j(),e.next=4,this.updateCountdown();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSlotChange",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onSlotChange"),this.updateStartTimeOptions(),e.next=4,this.updateCountdown();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onRefreshClick",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onRefreshClick"),this.updateStartTimeOptions(),e.next=4,this.updateCountdown();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"togglePause",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("togglePause"),this.setState((function(e){console.log("Current paused state",e.paused);var t=!e.paused;return console.log("Changing paused state to",t),{paused:t}})),!this.state.paused){e.next=7;break}return e.next=5,J();case 5:e.next=11;break;case 7:return e.next=9,W();case 9:return e.next=11,this.updateCountdown();case 11:t=this.state.paused,console.log("savePausedStateToLocalStorage",t),localStorage.setItem("paused",t);case 12:case"end":return e.stop()}var t}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("componentDidMount"),e.next=3,K();case 3:return this.updateStartTimeOptions(),w(this.updateStartTimeOptions),e.next=7,this.updateCountdown();case 7:if(this.setState({paused:v()}),!this.state.paused){e.next=11;break}return e.next=11,J();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(oe.jsxs)("div",{className:"content",children:[Object(oe.jsx)("h1",{children:"Meeting Countdown Timer"}),Object(oe.jsx)("p",{className:"meetingTime",children:Object(oe.jsx)("span",{id:"meetingTime"})}),Object(oe.jsxs)("div",{id:"clockdiv",children:[Object(oe.jsxs)("div",{children:[Object(oe.jsx)("span",{className:"hours"}),Object(oe.jsx)("div",{className:"clocktext",children:"Hours"})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("span",{className:"minutes"}),Object(oe.jsx)("div",{className:"clocktext",children:"Minutes"})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("span",{className:"seconds"}),Object(oe.jsx)("div",{className:"clocktext",children:"Seconds"})]})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("p",{children:[Object(oe.jsx)("label",{className:"label",htmlFor:"meetingSlot",children:"Start time: "}),Object(oe.jsx)("select",{className:"select",name:"meetingSlot",id:"meetingSlot",onChange:this.onSlotChange,children:Object(oe.jsx)("option",{value:"-1",children:"Loading ..."})}),Object(oe.jsx)(m.RefreshCircle,{className:"icon",color:"#00816a",title:"Reset timer",width:"30px",height:"30px",onClick:this.onRefreshClick}),this.state.paused&&Object(oe.jsx)(m.PlayCircle,{className:"icon",color:"#00816a",title:"Enable notifications",height:"30px",width:"30px",onClick:this.togglePause}),!this.state.paused&&Object(oe.jsx)(m.StopCircle,{className:"icon",color:"#00816a",title:"Stop notifications",height:"30px",width:"30px",onClick:this.togglePause})]}),Object(oe.jsxs)("p",{children:[Object(oe.jsx)("label",{className:"label",htmlFor:"meetingDuration",children:"Duration: "}),Object(oe.jsxs)("select",{className:"select",name:"meetingDuration",id:"meetingDuration",defaultValue:"30",onChange:this.onDurationChange,children:[Object(oe.jsx)("option",{value:"15",children:"15 mins"}),Object(oe.jsx)("option",{value:"30",children:"30 mins"}),Object(oe.jsx)("option",{value:"45",children:"45 mins"}),Object(oe.jsx)("option",{value:"60",children:"1 hour"}),Object(oe.jsx)("option",{value:"90",children:"1.5 hours"}),Object(oe.jsx)("option",{value:"120",children:"2 hours"}),Object(oe.jsx)("option",{value:"150",children:"2.5 hours"}),Object(oe.jsx)("option",{value:"180",children:"3 hours"})]}),Object(oe.jsx)("label",{id:"meetingSpeedyLabel",className:"label",htmlFor:"meetingSpeedy",children:"End early?"}),Object(oe.jsx)("input",{className:"checkbox",type:"checkbox",id:"meetingSpeedy",name:"meetingSpeedy",onChange:this.onSpeedyChange})]}),Object(oe.jsx)("p",{children:Object(oe.jsx)("span",{className:"tinyText",children:Object(oe.jsx)("a",{href:"https://khilnani.org",target:"_blank",rel:"noreferrer",children:"Nik Khilnani"})})})]})]})}}]),n}(o.Component),ue=le,pe=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,1352)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),r(e),i(e)}))};i.a.render(Object(oe.jsx)(a.a.StrictMode,{children:Object(oe.jsx)(ue,{})}),document.getElementById("root")),pe()},26:function(e,t,n){},36:function(e,t,n){}},[[1350,1,2]]]);
//# sourceMappingURL=main.f05d0932.chunk.js.map